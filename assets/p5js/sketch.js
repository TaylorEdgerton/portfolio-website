function preload(){gameFont=loadFont("../../assets/p5js/assets/font/gameFont.ttf"),leaderboardData=loadJSON("../../assets/p5js/LeaderBoard.JSON"),credits=loadStrings("../../assets/p5js/Credits.txt"),explosionAnim=loadAnimation("../../assets/p5js/assets/explosions/expl1.png","../../assets/p5js/assets/explosions/expl2.png","../../assets/p5js/assets/explosions/expl3.png","../../assets/p5js/assets/explosions/expl4.png","../../assets/p5js/assets/explosions/expl5.png","../../assets/p5js/assets/explosions/expl6.png","../../assets/p5js/assets/explosions/expl7.png","../../assets/p5js/assets/explosions/expl8.png","../../assets/p5js/assets/explosions/expl9.png","../../assets/p5js/assets/explosions/expl10.png"),video=createVideo(["../../assets/p5js/assets/Video/video1.mp4"]),explSound=loadSound("../../assets/p5js/assets/Sounds/explosionSound.wav"),laserSound=loadSound("../../assets/p5js/assets/Sounds/laser.wav"),enemySound=loadSound("../../assets/p5js/assets/Sounds/launch.wav"),error=loadSound("../../assets/p5js/assets/Sounds/error.mp3"),NextLevelSound=loadSound("../../assets/p5js/assets/Sounds/NextLevel.wav"),airDropSound=loadSound("../../assets/p5js/assets/Sounds/airdrop.wav"),rocketImg=loadImage("../../assets/p5js/assets/rockets/rockets.png"),scoreTitle=loadImage("../../assets/p5js/assets/Text/score.png"),airDropImg=loadImage("../../assets/p5js/assets/SpaceShip.png"),cityImg=loadImage("../../assets/p5js/assets/City.png"),crossHairImg1=loadImage("../../assets/p5js/assets/Crosshair/crosshair1.png"),crossHairImg2=loadImage("../../assets/p5js/assets/Crosshair/crosshair.png"),attackImage=loadImage("../../assets/p5js/assets/rockets/attack.png"),backgroundImage=loadImage("../../assets/p5js/assets/background.png"),plane=loadImage("../../assets/p5js/assets/SpaceShip.png"),title=loadImage("../../assets/p5js/assets/Text/title.png"),blownCity=loadImage("../../assets/p5js/assets/explodedCity.png"),creditTitle=loadImage("../../assets/p5js/assets/Text/credits.png"),leaderboardTitle=loadImage("../../assets/p5js/assets/Text/leaderboard.png"),missile=loadImage("../../assets/p5js/assets/rockets/spr_missile.png"),smokeImg=loadImage("../../assets/p5js/assets/rockets/smoke.png")}function protect(){let e=height-20;for(let t=0;t<4;t++)(city=createSprite(400*t+150,e)).setCollider("rectangle",0,0,100,100),city.changeImage("city"),blownCity.resize(100,20),city.addImage("city",cityImg),city.addImage("cityBlown",blownCity),cities.add(city)}function cityCollision(){if(1==attackers.overlap(cities)){for(let e=0;e<cities.length;e++)1==attackers.overlap(cities[e])&&(cities[e].changeImage("cityBlown"),blownCityNo[e]=1,rumbleCount=1);for(let e=0;e<attackers.length;e++)1==attackers[e].overlap(cities)&&(explSound.play(),explosion3=createSprite(attackers[e].position.x,attackers[e].position.y),attackers[e].remove(),attackers.splice(e,1),explosion3.addAnimation("explod",explosionAnim.clone()),explosion3.animation.frameDelay=3,attackerCityExpl.push(explosion3))}for(let e=0;e<attackerCityExpl.length;e++)9==attackerCityExpl[e].animation.getFrame()&&(attackerCityExpl[e].remove(),attackerCityExpl.splice(e,1))}function enemy(){TTS<0&&(attack=createSprite(random(0,width),0),smokeImg.resize(100,10),attack.addImage(smokeImg),attack.setCollider("rectangle",0,0,40,10),attack.attractionPoint(random(attractionMin,attractionMax),random(50,1450),height),attack.rotateToDirection=!0,TTS+=random(1,2),attackers.push(attack),BlownUpEnemies+=1);for(let e=0;e<attackers.length;e++){attackers[e].position.y>height&&(attackers[e].remove(),attackers.splice(e,1));for(let e=0;e<attackers.length;e++)1==attackers[e].collide(exploded)&&(explSound.play(),explosion2=createSprite(attackers[e].position.x,attackers[e].position.y),attackers[e].remove(),attackers.splice(e,1),explosion2.addAnimation("explod",explosionAnim.clone()),explosion.animation.frameDelay=3,attackerExpl.push(explosion2),score+=10,rumbleCount=1);for(let e=0;e<attackerExpl.length;e++)9==attackerExpl[e].animation.getFrame()&&(attackerExpl[e].remove(),attackerExpl.splice(e,1))}}function airDropPlane(){ATTS<0&&((airDrop=createSprite(-50,random(150,500))).addImage(airDropImg),airDropImg.resize(50,20),airDrop.attractionPoint(random(attractionMin,attractionMax),width+50,airDrop.position.y),airDrop.rotateToDirection=!0,ATTS+=random(10,20),airDrops.push(airDrop));for(let e=0;e<airDrops.length;e++){airDrops[e].position.x>width+100&&(airDrops[e].remove(),airDrops.splice(e,1));for(let e=0;e<airDrops.length;e++)1==airDrops[e].collide(exploded)&&(explSound.play(),explosion2=createSprite(airDrops[e].position.x,airDrops[e].position.y),airDrops[e].remove(),airDrops.splice(e,1),explosion2.addAnimation("explod",explosionAnim.clone()),explosion.animation.frameDelay=3,attackerExpl.push(explosion2),score+=10,rumbleCount=1,rocketNo+=10,airDropSound.play());for(let e=0;e<attackerExpl.length;e++)9==attackerExpl[e].animation.getFrame()&&(attackerExpl[e].remove(),attackerExpl.splice(e,1))}}function crossHairSprite(e,t){(crossHair=createSprite(e,t)).addImage(crossHairImg2),crossHairImg2.resize(30,30),sp=8,crossHair.friction=.5,crossHairPos.push(crossHair)}function cannon(){fill(255),ellipse(width/2,height,100,100),fill(0),textAlign(CENTER),textSize(24),0==rocketNo?fill("red"):fill("green"),text(rocketNo,width/2,height-20)}function controls(){keyDown("w")&&crossHairPos[0].addSpeed(sp,270),keyDown("d")&&crossHairPos[0].addSpeed(sp,0),keyDown("s")&&crossHairPos[0].addSpeed(sp,90),keyDown("a")&&crossHairPos[0].addSpeed(sp,180),keyDown(16)?crossHairPos[0].limitSpeed(20):crossHairPos[0].limitSpeed(10),!0===keyWentDown(66)&&0==burst?burst=1:!0===keyWentDown(66)&&1==burst&&(burst=0)}function explode(){!0===keyWentDown(32)&&0==burst&&rocketNo>0&&((aim=createSprite(crossHair.position.x,crossHair.position.y)).addImage(crossHairImg1),crossHairImg1.resize(20,20),aim.rotation=45,aim.setCollider("rectangle"),aimed.push(aim),(rocket=createSprite(width/2,height)).addImage(rocketImg),rocket.attractionPoint(20,aim.position.x,aim.position.y),rocketImg.resize(15,5),rocket.rotateToDirection=!0,rocket.setCollider("circle"),laserSound.play(),rockets.push(rocket),rocketNo--),!0===keyIsDown(32)&&rocketNo>0&&frameCount%5==0&&1==burst?((aim=createSprite(crossHair.position.x,crossHair.position.y)).addImage(crossHairImg1),crossHairImg1.resize(20,20),aim.rotation=45,aim.setCollider("rectangle"),aimed.push(aim),(rocket=createSprite(width/2,height)).addImage(rocketImg),rocket.attractionPoint(20,aim.position.x,aim.position.y),rocketImg.resize(15,5),rocket.rotateToDirection=!0,rocket.setCollider("circle"),laserSound.play(),rockets.push(rocket),rocketNo--):!0===keyWentDown(32)&&0==rocketNo&&error.play();for(let e=0;e<aimed.length;e++)1==rockets[e].collide(aimed[e])&&(explSound.play(),(explosion=createSprite(aimed[e].position.x,aimed[e].position.y)).addAnimation("explod",explosionAnim.clone()),explosion.animation.frameDelay=8,explosion.setCollider("circle",0,0,50),exploded.push(explosion),rockets[e].remove(),rockets.splice(e,1),aimed[e].remove(),aimed.splice(e,1));for(let e=0;e<exploded.length;e++)9==exploded[e].animation.getFrame()&&(exploded[e].remove(),exploded.splice(e,1))}function Start(){gameState=2,leaderB.hide(),creditsB.hide(),startButton.hide()}function leaderBoardPage(){gameState=3,leaderB.hide(),creditsB.hide(),startButton.hide()}function creditsPage(){gameState=4,leaderB.hide(),creditsB.hide(),startButton.hide()}function gameOverPage(){clear(),burst=0,TTS=1,ATTS=20;for(let e=0;e<cities.length;e++)cities[e].changeImage("city");for(let e=0;e<attackers.length;e++)attackers[e].remove(),attackers.splice(e,1);for(let e=0;e<exploded.length;e++)exploded[e].remove(),exploded.splice(e,1);for(let e=0;e<aimed.length;e++)aimed[e].remove(),aimed.splice(e,1);for(let e=0;e<rockets.length;e++)rockets[e].remove(),rockets.splice(e,1);for(let e=0;e<attackerExpl.length;e++)attackerExpl[e].remove(),attackerExpl.splice(e,1);frameCount%60==0&&anyKeyTimer--,1==keyIsPressed&&anyKeyTimer<0&&(clear(),gameState=1)}function back(){gameState=1,backButton.hide(),loop(),clear()}function keyPressed(){if(27===keyCode){TTS=1,gameState=1,blownCityNo=[0,0,0,0];for(let e=0;e<cities.length;e++)cities[e].changeImage("city");for(let e=0;e<attackers.length;e++)attackers[e].remove(),attackers.splice(e,1);for(let e=0;e<exploded.length;e++)exploded[e].remove(),exploded.splice(e,1);for(let e=0;e<aimed.length;e++)aimed[e].remove(),aimed.splice(e,1);for(let e=0;e<rockets.length;e++)rockets[e].remove(),rockets.splice(e,1);for(let e=0;e<attackerExpl.length;e++)attackerExpl[e].remove(),attackerExpl.splice(e,1);for(let e=0;e<airDrops.length;e++)airDrops[e].remove(),airDrops.splice(e,1)}}function crossHairBorder(){borderTop=createSprite(width/2,10,cWidth,50),borderBottom=createSprite(width/2,height-10,width+10,50),borderLeft=createSprite(10,height/2,50,height+10),borderRight=createSprite(width-10,height/2,50,height+10),borderTop.visible=!1,borderBottom.visible=!1,borderLeft.visible=!1,borderRight.visible=!1,borderTop.setDefaultCollider(),borderBottom.setDefaultCollider(),borderLeft.setDefaultCollider(),borderRight.setDefaultCollider(),(borders=new Group).push(borderTop),borders.push(borderBottom),borders.push(borderLeft),borders.push(borderRight)}function setup(){cnv=createCanvas(windowWidth-50,.56*windowWidth),console.log(cnv.elt.height),console.log(height);var e=(windowWidth-width)/2;windowHeight,height;possi=cnv.position(e,0),console.log(possi),crossHairBorder(),startButton=createButton("Start Game"),leaderB=createButton("Leaderboard"),creditsB=createButton("Credits"),backButton=createButton("back"),startButton.hide(),leaderB.hide(),creditsB.hide(),backButton.hide(),exploded=new Group,cities=new Group,attackers=new Group,attackerCityExpl=new Group,crossHairSprite(width/2,height/2),imageMode(CENTER),backgroundImage.resize(width,height),protect()}function draw(){if(crossHair.collide(borders),1===gameState&&(anyKeyTimer=2,blownCityNo=[0,0,0,0],rocketNo=10,score=0,BlownUpEnemies=0,level=0,attractionMin=1,attractionMax=5,imageMode(CORNER),image(backgroundImage,bg.x,bg.y),imageMode(CENTER),image(title,width/2,height/4+100),fill(255),textSize(10),textFont(gameFont),text("Controls: Up = W   Down = S    Left = A   Right = D   (HOLD) Shift = Speed Up CrossHair   Fire = SpaceBar     Main Menu = Esc     Rapid Fire = B",20,height-50),startbut=startButton.style("font-size","20px"),startButton.style("font-family","lores-9-wide-bold-alt-oaklan"),startButton.size(500,50),startButton.position(cnv.elt.width/2-startbut.elt.width/2,height/2+50),startButton.style("color","red"),startButton.style("border","2px solid #f44336"),startButton.style("background","darkblue"),startButton.mouseClicked(Start),leaderbut=leaderB.style("font-size","20px"),leaderB.style("font-family","lores-9-wide-bold-alt-oaklan"),leaderB.style("border","2px solid #f44336"),leaderB.style("background","darkblue"),leaderB.position(cnv.elt.width/2-leaderbut.elt.width/2,height/2+150),leaderB.size(500,50),leaderB.style("color","red"),leaderB.mouseClicked(leaderBoardPage),credbut=creditsB.style("font-size","20px"),creditsB.style("color","red"),creditsB.style("font-family","lores-9-wide-bold-alt-oaklan"),creditsB.style("border","2px solid #f44336"),creditsB.style("background","darkblue"),creditsB.position(cnv.elt.width/2-credbut.elt.width/2,height/2+250),creditsB.size(500,50),creditsB.mouseClicked(creditsPage),startButton.show(),leaderB.show(),creditsB.show()),3==gameState){for(let e=0;e<10;e++)imageMode(CORNER),image(backgroundImage,bg.x,bg.y),imageMode(CENTER),image(leaderboardTitle,width/2,100),rank.push(leaderboardData.leaderboard[e].Rank),highScore.push(leaderboardData.leaderboard[e].Score),name1.push(leaderboardData.leaderboard[e].Name),fill("red"),textSize(24),textAlign(CENTER),textFont(gameFont),text("RANK   HIGH SCORE    NAME",width/2,200);for(let e=0;e<rank.length;e++)e<rank.length&&(textAlign(CENTER),textFont(gameFont),text(rank[e]+"      "+highScore[e]+"        "+name1[e],width/2,50*e+250));noLoop(),backButton.show(),backbut1=backButton.style("font-size","20px"),backButton.style("font-family","lores-9-wide-bold-alt-oaklan"),backButton.position(cnv.elt.width/2-backbut1.elt.width/2,height-50),backButton.size(500,50),backButton.mouseClicked(back)}if(4==gameState){imageMode(CORNER),image(backgroundImage,bg.x,bg.y),imageMode(CENTER),image(creditTitle,width/2,100);for(let e=0;e<credits.length;e++)textSize(12),fill(255),fill("red"),textAlign(CENTER),textFont(gameFont),text(credits[e],width/2,80*e+200);backButton.show(),backbut2=backButton.style("font-size","20px"),backButton.style("font-family","lores-9-wide-bold-alt-oaklan"),backButton.position(cnv.elt.width/2-backbut2.elt.width/2,height-50),backButton.size(500,50),backButton.mouseClicked(back)}if(0===gameState){background("Darkblue"),imageMode(CENTER);let e="Press Any Key";image(video,width/2,height/2,width,height),fill("red"),textSize(20),textAlign(CENTER),textFont(gameFont),text("By Taylor Edgerton",width/2,height-300),text(e,width/2,height-100),image(title,width/2,height/2),video.volume(0),video.hide(),video.loop(),!0===keyIsPressed&&(clear(),gameState=1)}2===gameState&&(background("Darkblue"),imageMode(CORNER),backgroundImage.resize(width,height),image(backgroundImage,bg.x,bg.y),frameCount%60==0&&rumbleCount--,rumbleCount>0&&translate(randomGaussian(-5,5),randomGaussian(-5,5)),fill("red"),textFont(gameFont),textSize(24),text("SCORE:  "+score,200,50),text("LEVEL:  "+level,width-400,50),frameCount%60==0&&(TTS--,ATTS--),10==BlownUpEnemies&&(TTS/=2,level+=1,score+=500,attractionMin+=2,attractionMax+=2,rocketNo+=10,BlownUpEnemies=0,NextLevelSound.play()),airDropPlane(),cannon(),controls(),explode(),enemy(),cityCollision(),drawSprites(),1==blownCityNo[0]&&1==blownCityNo[1]&&1==blownCityNo[2]&&1==blownCityNo[3]&&(gameState=5)),5==gameState&&(gameOverPage(),imageMode(CORNER),image(backgroundImage,bg.x,bg.y),imageMode(CENTER),image(scoreTitle,width/2,100),fill("red"),textSize(32),textAlign(CENTER),text(score,width/2,height/2),text("Press Any Key",width/2,height-50))}let exploded,borderTop,borderBottom,borderLeft,borderRight,explosion,rocket,aim,attack,base,startButton,leaderB,creditsB,crossHair,sp,airDrop,borders=new Array,rockets=new Array,rocketNo=10,cityNo=4,score=0,aimed=new Array,click={x:new Array,y:new Array},TTS=1,ATTS=2,game=1,gameState=0,city=new Array,cities=new Array,attackers=new Array,rumbleCount=0,bg={x:0,y:0},crossHairPos=new Array,attackerExpl=new Array,attackerCityExpl=new Array,blownCityNo=[0,0,0,0],rank=new Array,highScore=new Array,name1=new Array,BlownUpEnemies=0,level=0,attractionMin=1,attractionMax=5,airDrops=new Array;const cWidth=1500,cHeight=850;let anyKeyTimer=2,burst=0;